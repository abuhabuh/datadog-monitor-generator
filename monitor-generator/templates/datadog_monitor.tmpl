resource "datadog_monitor" "{{monitor_name}}" {
  name               = "{{monitor_name_pretty}}"
  type               = "metric alert"
  message            = "{{msg}}"
  escalation_message = "{{escalation_msg}}"

  query = "{{monitor_query}}"

  monitor_thresholds {
    warning           = 2
    warning_recovery  = 1
    critical          = 4
    critical_recovery = 3
  }

  notify_no_data    = false
  renotify_interval = 60

  notify_audit = false
  timeout_h    = 60
  include_tags = true

  # ignore any changes in silenced value; using silenced is deprecated in favor of downtimes
  lifecycle {
    ignore_changes = [silenced]
  }

  tags = ["foo:bar", "baz"]
}

